(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a(75)},49:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(16),s=a.n(o),i=a(6),l=a(7),c=a(11),u=a(8),m=a(10),p=a(77),d=a(80),h=a(79),v=(a(47),a(49),a(3)),g=a(76),E=a(17),f=a.n(E),y=function(e,t){return function(a){return a({type:"INITIATE_SEARCH",payload:!0}),f.a.get("/api/".concat(e)).then(function(e){return t<=1?(a({type:"MOVIE_SEARCH",payload:{movies:e.data.movies,loading:!1}}),e.data.movies.length):(a({type:"LOAD_NEW_PAGE",payload:{movies:e.data.movies,loading:!1}}),e.data.movies.length)})}},b=a(9),O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).timer=null,a.state={searchTerm:"",category:"genres",sortType:"title",desc:!0,isOpen:!1},a.toggle=function(){a.setState({isOpen:!a.state.isOpen})},a.renderNavItems=function(){return a.props.loggedIn?r.a.createElement(v.t,{nav:!0,inNavbar:!0},r.a.createElement(v.h,{nav:!0,caret:!0},"Logged in as: ",a.props.user.email),r.a.createElement(v.g,null,r.a.createElement(v.f,null,r.a.createElement(g.a,{to:"/favorites"},"View Favorite Movies")))):r.a.createElement(v.o,{navbar:!0},r.a.createElement(v.p,null,r.a.createElement(g.a,{to:"/signin",className:"custom-btn",style:{marginLeft:"-10px"}}," ",r.a.createElement(v.b,null,"Sign In"))),r.a.createElement(v.p,null,r.a.createElement(g.a,{to:"/signup",className:"custom-btn"},r.a.createElement(v.b,null,"Sign Up"))))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getOptions",value:function(){var e=this;this.timer&&clearTimeout(this.timer),this.state.searchTerm&&(this.timer=setTimeout(function(){e.props.optionSearch(e.state.category,e.state.searchTerm)},150))}},{key:"render",value:function(){var e=this,t=this.props.options,a=this.state,n=a.searchTerm,o=a.category,s=a.sortType,i=a.desc;n=n||'""';var l="".concat(o="movies"===o?"movieTitle":"genreName","=").concat(n,"&sortOn=").concat(s,"&desc=").concat(i);return r.a.createElement("div",null,r.a.createElement(v.q,{color:"dark",dark:!0,expand:"lg",className:"mb-5"},r.a.createElement(v.e,{class:"container-fluid"},r.a.createElement(g.a,{to:"/prosjekt4"},r.a.createElement(v.r,null,"Movie Database")),r.a.createElement(v.s,{onClick:this.toggle}),r.a.createElement(v.d,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(v.i,{inline:!0,onSubmit:this.handleSubmit,style:{width:"75%"}},r.a.createElement(v.l,{"data-cy":"search-bar",list:"searchbar",style:{width:"35%"},type:"text",placeholder:"Search for movie or director",onChange:function(t){e.setState({searchTerm:t.target.value},function(){return e.getOptions(t)})}}),t&&r.a.createElement("datalist",{"data-cy":"option-list",id:"searchbar",style:{height:"200px"}},t.map(function(t){return r.a.createElement("option",{key:t._id,value:t["movies"===e.state.category.toLowerCase()?"title":"name"]})})),r.a.createElement(v.l,{"data-cy":"category-input",style:{marginLeft:"5px"},type:"select",onChange:function(t){e.setState({category:t.target.value},function(){return e.getOptions()})}},r.a.createElement("option",{value:"genres"},"Genres"),r.a.createElement("option",{value:"movies"},"Movies")),r.a.createElement("h6",{style:{color:"white"}},"-sort by-"),r.a.createElement(v.l,{"data-cy":"sort-input",style:{marginLeft:"5px"},type:"select",onChange:function(t){e.setState({sortType:t.target.value})}},r.a.createElement("option",{value:"title"},"Title"),r.a.createElement("option",{value:"release_date"},"Year"),r.a.createElement("option",{value:"vote_average"},"Rating"),r.a.createElement("option",{value:"popularity"},"Popularity"),r.a.createElement("option",{value:"vote_count"},"Votes")),r.a.createElement(v.l,{"data-cy":"sort-order",type:"select",style:{marginLeft:"5px"},onChange:function(t){return e.setState({desc:!e.state.desc})}},r.a.createElement("option",null,"Desc"),r.a.createElement("option",null,"Asc")),r.a.createElement(g.a,{to:"/search/".concat(l)},r.a.createElement(v.b,{"data-cy":"search-btn",style:{marginLeft:"5px"}},"Search"))),r.a.createElement(v.c,null,this.renderNavItems())))))}}]),t}(n.Component),j=Object(b.b)(function(e){return{user:e.auth.user,loggedIn:e.auth.loggedIn,token:e.auth.token,options:e.options.options}},function(e){return{optionSearch:function(t,a){return e(function(e,t){return function(a){var n="movies"===e?"movieTitle":"genreName",r="/api/".concat(e,"/search?").concat(n,"=").concat(t,"&sortOn=popularity&desc=true&page=1&limit=6");return f.a.get(r).then(function(t){a({type:"FETCH_OPTIONS",payload:t.data[e]})})}}(t,a))}}})(O),w=a(78),S=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).timer=null,a.state={email:"@",password:""},a.createUser=function(e){e.preventDefault(),a.props.createUser(a.state.email,a.state.password)},a.handleFormChange=function(e,t){a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){return a.setState(t)},800)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.email.includes("@"),a="@"===this.state.email?{borderColor:"grey"}:{},n=this.state.password?{}:{borderColor:"grey"};return this.props.loggedIn?r.a.createElement(w.a,{to:"/prosjekt4"}):r.a.createElement("div",{className:"container center-div"},this.props.message&&r.a.createElement(v.a,{color:"danger",style:{width:"50%"}},this.props.message),r.a.createElement(v.i,{onSubmit:this.createUser,style:{width:"50%"}},r.a.createElement(v.k,null,r.a.createElement(v.m,{for:"email"},"Email Address"),r.a.createElement(v.l,{style:a,valid:t&&!this.props.message,invalid:!t,type:"email",placeholder:"Type in your email",onChange:function(t){return e.handleFormChange(t,{email:t.target.value})}}),r.a.createElement(v.j,null,this.state.email.includes("@")?null:"Not a valid email. you need @")),r.a.createElement(v.k,null,r.a.createElement(v.m,{for:"password"},"Password"),r.a.createElement(v.l,{style:n,valid:this.state.password.length>4,invalid:!(this.state.password.length>4),type:"password",placeholder:"Please type a password",onChange:function(t){return e.handleFormChange(t,{password:t.target.value})}}),r.a.createElement(v.j,null,"You need at least 5 characters")),r.a.createElement(v.k,{className:"center-div"},r.a.createElement(v.b,{style:{width:"40%"},disabled:!(t&&this.state.password.length>4)},"Create User"))))}}]),t}(n.Component),N=Object(b.b)(function(e){return{message:e.auth.message,loggedIn:e.auth.loggedIn}},function(e){return{createUser:function(t,a){return e(function(e,t){return function(a){var n={email:e,password:t};f.a.post("api/users/signup",n).then(function(e){a({type:"CREATE_USER_SUCCESS",payload:e.data})}).catch(function(e){a({type:"CREATE_USER_ERROR",payload:e.response.data})})}}(t,a))}}})(S),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).timer=null,a.state={email:"",password:""},a.signIn=function(e){e.preventDefault(),a.props.signInUser(a.state.email,a.state.password)},a.handleFormChange=function(e,t){a.setState(t)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.email.includes("@"),a="@"===this.state.email?{borderColor:"grey"}:{},n=this.state.password?{}:{borderColor:"grey"};return this.props.loggedIn?r.a.createElement(w.a,{to:"/prosjekt4"}):r.a.createElement("div",{className:"container center-div"},this.props.message&&r.a.createElement(v.a,{"data-cy":"error-alert",color:"danger",style:{width:"50%"}},this.props.message),r.a.createElement(v.i,{onSubmit:this.signIn,style:{width:"50%"}},r.a.createElement(v.k,null,r.a.createElement(v.m,{for:"email"},"Email Address"),r.a.createElement(v.l,{"data-cy":"email-input",style:a,valid:t&&!this.props.message,invalid:!t,type:"email",placeholder:"Type in your email",onChange:function(t){return e.handleFormChange(t,{email:t.target.value})}}),r.a.createElement(v.j,null,this.state.email.includes("@")?null:"Not a valid email. you need @")),r.a.createElement(v.k,null,r.a.createElement(v.m,{for:"password"},"Password"),r.a.createElement(v.l,{"data-cy":"password-input",style:n,valid:this.state.password.length>4||!this.state.length,invalid:!(this.state.password.length>4),type:"password",placeholder:"Please type a password",onChange:function(t){return e.handleFormChange(t,{password:t.target.value})}}),r.a.createElement(v.j,null,"You need at least 5 characters")),r.a.createElement(v.k,{className:"center-div"},r.a.createElement(v.b,{style:{width:"40%"},disabled:!(t&&this.state.password.length>4)},"Sign In"))))}}]),t}(n.Component),I=Object(b.b)(function(e){return{user:e.auth.user,loggedIn:e.auth.loggedIn,message:e.auth.message}},function(e){return{signInUser:function(t,a){return e(function(e,t){return function(a){var n={email:e,password:t};f.a.post("api/users/signin",n).then(function(e){return a({type:"SIGNIN_USER_SUCCESS",payload:e.data}),e.data}).catch(function(e){console.log(e.response),a({type:"USER_SIGNIN_ERROR",payload:e.response})})}}(t,a))}}})(C),_=a(20),k=a.n(_),T=a(22),R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).addFavorite=function(){var e=a.props.user._id,t=a.props.movieId;a.props.changeFavoriteMovies(e,t,!1)},a.removeFavorite=function(){var e=a.props.user._id,t=a.props.movieId;a.props.changeFavoriteMovies(e,t,!0)},a.state={detailsVisible:!1},a.setDetails=a.setDetails.bind(Object(T.a)(Object(T.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"setDetails",value:function(){this.setState({detailsVisible:!this.state.detailsVisible})}},{key:"renderJobDetails",value:function(e){var t=this.props[e].slice(0,10).length;return this.props[e].slice(0,10).map(function(e,a){return a===t-1?e.name:e.name+", "})}},{key:"renderFavoriteButton",value:function(){if(this.props.user){var e=this.props.user.favorites,t=this.props.movieId;return 0===e.filter(function(e){return t===e}).length?r.a.createElement(v.b,{id:this.props.title,size:"sm",className:"favorite-button",onClick:this.addFavorite},"Add to Favorites"):r.a.createElement(v.b,{id:this.props.title,size:"sm",className:"favorite-button",onClick:this.removeFavorite},"Remove From Favorites")}return r.a.createElement("p",null)}},{key:"renderDetails",value:function(){return r.a.createElement("div",{className:"movie-detail"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3 col-sm-12"},r.a.createElement("img",{src:this.props.photo,alt:"",height:"360",width:"240"})),r.a.createElement("div",{"data-cy":"movie-info",className:"col-md-7 offset-1 col-sm-12"},r.a.createElement("p",null,this.props.overview),r.a.createElement("h5",null,"Director: ",this.renderJobDetails("directors")),r.a.createElement("h5",null,"Cast: ",this.renderJobDetails("cast")),r.a.createElement("h5",null,"Genres: ",this.renderJobDetails("genres")),r.a.createElement("h5",null,"Popularity: ",this.props.popularity),r.a.createElement("h5",null,"Votes: ",this.props.votes))),r.a.createElement("div",{className:"col-md-2 offset-5"},r.a.createElement(v.b,{"data-cy":"close-button",block:!0,style:{marginTop:"1rem",marginBottom:"1rem"},onClick:this.setDetails},"Close")))}},{key:"render",value:function(){var e=this.state.detailsVisible?this.renderDetails():null;return r.a.createElement("div",{className:"container",style:{backgroundColor:this.props.color}},r.a.createElement("div",{className:"row",style:{height:"5rem",alignItems:"center"}},r.a.createElement("div",{className:"col-md-8 col-sm-12"},r.a.createElement("h3",{"data-cy":"title",onClick:this.setDetails},this.props.title," (",this.props.release_date.slice(0,4),") Rating: ",this.props.rating,"/10")),r.a.createElement("div",{className:"col-md-3 col-xs-6",style:{flexStart:"end"}},this.renderFavoriteButton())),e)}}]),t}(n.Component),F=Object(b.b)(function(e){return{loggedIn:e.auth.loggedIn,user:e.auth.user}},function(e){return{changeFavoriteMovies:function(t,a,n){return e(function(e,t,a){return function(n){var r={movieId:t,isDelete:a};f.a.post("/api/users/".concat(e,"/favorites"),r).then(function(e){n({type:"FAVORITES_CHANGED",payload:e.data})}).catch(function(e){console.log(e)})}}(t,a,n))}}})(R),A=function(e){return r.a.createElement("div",{"data-cy":"movie-list"},e.movies.map(function(e,t){var a=e.credits.crew.filter(function(e){return"Director"===e.job});return r.a.createElement(F,{key:e._id,movieId:e._id,title:e.title,color:t%2===1?"white":"#dddddd",overview:e.overview,cast:e.credits.cast,directors:a,genres:e.genres,photo:e.poster_path,release_date:e.release_date,rating:e.vote_average,votes:e.vote_count,popularity:e.popularity})}))},D=function(){return r.a.createElement("div",{style:{marginTop:"10px",marginBottom:"20px",display:"flex",flexDirection:"row",justifyContent:"center"}},r.a.createElement("div",{className:"loader"}))},M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).loadNewFavorites=function(){if(!a.state.bottom&&!a.props.loading){var e=a.props.user._id;a.setState({loading:!0},function(){a.props.fetchFavoriteMovies(e,a.state.pageNumber).then(function(e){a.setState({pageNumber:a.state.pageNumber+1,bottom:0===e})})})}},a.state={pageNumber:2,bottom:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if(this.props.user){var e=this.props.user._id;this.props.fetchFavoriteMovies(e,1)}}},{key:"componentDidUpdate",value:function(e){if(e.user.favorites!==this.props.user.favorites){var t=this.props.user._id;this.props.fetchFavoriteMovies(t,1)}}},{key:"render",value:function(){return this.props.user?r.a.createElement("div",{className:"container",style:{marginBottom:"20px"}},this.props.loading&&r.a.createElement(D,null),r.a.createElement(k.a,{onBottom:this.loadNewFavorites},r.a.createElement(v.n,null,r.a.createElement(A,{movies:this.props.movies}))),this.props.loading&&r.a.createElement(D,null)):r.a.createElement(w.a,{to:"/"})}}]),t}(n.Component),U=Object(b.b)(function(e){return{user:e.auth.user,movies:e.movie.movies,loading:e.movie.loading}},function(e){return{fetchFavoriteMovies:function(t,a){return e(function(e,t){return function(a){return a({type:"INITIATE_SEARCH",payload:!0}),f.a.get("/api/users/".concat(e,"/favorites?page=").concat(t,"&limit=10")).then(function(e){return t<=1?(a({type:"GET_FAVORITE_MOVIES",payload:{movies:e.data.movies,loading:!1}}),e.data.movies.length):(console.log(e.data.movies),a({type:"LOAD_NEW_PAGE",payload:{movies:e.data.movies,loading:!1}}),e.data.movies.length)})}}(t,a))}}})(M),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).loadNewMoviesFromSearch=function(){if(!a.props.loading&&!a.state.bottom){var e=a.props.match.params.query,t="movies/search?".concat(e,"&page=").concat(a.state.pageNumber,"&limit=10");a.props.search(t,a.state.pageNumber).then(function(e){a.setState({bottom:0===e,pageNumber:a.state.pageNumber+1})})}},a.state={pageNumber:2,newSearch:!1,bottom:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.query,t="movies/search?".concat(e,"&page=1&limit=10");this.props.search(t,1)}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.match.params!==this.props.match.params){var a=this.props.match.params.query,n="movies/search?".concat(a,"&page=1&limit=10");this.setState({newSearch:!0},function(){return t.props.search(n,1).then(function(){return t.setState({newSearch:!1,pageNumber:2})})})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"container",style:{marginBottom:"20px"}},this.state.newSearch&&r.a.createElement(D,null),r.a.createElement(k.a,{onBottom:this.loadNewMoviesFromSearch},r.a.createElement(v.n,null,r.a.createElement(A,{movies:this.props.movies}))),this.props.loading&&r.a.createElement(D,null))}}]),t}(n.Component),V=Object(b.b)(function(e){return{movies:e.movie.movies,loading:e.movie.loading}},function(e){return{search:function(t,a){return e(y(t,a))}}})(x),G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={pageNumber:2,bottom:!1},a.loadNewMovies=function(){if(!a.props.loading&&!a.state.bottom){var e='movies/search?movieTitle=""&sortOn=popularity&desc=true&page='.concat(a.state.pageNumber,"&limit=10");a.props.search(e,a.state.pageNumber).then(function(e){a.setState({bottom:0===e,pageNumber:a.state.pageNumber+1})})}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.search('movies/search?movieTitle=""&sortOn=popularity&desc=true&page=1&limit=10',1)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container",style:{marginBottom:"20px"}},this.state.loading&&r.a.createElement(D,null),r.a.createElement(k.a,{onBottom:this.loadNewMovies},r.a.createElement(v.n,null,r.a.createElement(A,{movies:this.props.movies}))),this.props.loading&&r.a.createElement(D,null))}}]),t}(n.Component),B=Object(b.b)(function(e){return{movies:e.movie.movies,loading:e.movie.loading}},function(e){return{search:function(t,a){return e(y(t,a))}}})(G),H=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(j,null),r.a.createElement(d.a,null,r.a.createElement(h.a,{path:"/signUp",component:N}),r.a.createElement(h.a,{path:"/signin",component:I}),r.a.createElement(h.a,{path:"/search/:query",component:V}),r.a.createElement(h.a,{path:"/favorites",component:U}),r.a.createElement(h.a,{exact:!0,path:"/prosjekt4",component:B}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(19),L=a(41),J=a(13),q={user:null,message:null,loggedIn:!1,token:null},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_USER_SUCCESS":return Object(J.a)({},e,{user:t.payload.user,loggedIn:!0});case"CREATE_USER_ERROR":return Object(J.a)({},e,{user:null,message:t.payload.message});case"SIGNIN_USER_SUCCESS":return Object(J.a)({},e,{user:t.payload.user,loggedIn:!0,token:t.payload.token});case"USER_SIGNIN_ERROR":return Object(J.a)({},e,{user:null,message:t.payload.data.message,loggedIn:!1});case"FAVORITES_CHANGED":return Object(J.a)({},e,{user:t.payload.user});default:return e}},Y=a(18),z={movies:[],searchMode:!1,favoriteMode:!1,pageNumber:1,loading:!1},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIES":return Object(J.a)({},e,{movies:Object(Y.a)(t.payload)});case"MOVIE_SEARCH":return Object(J.a)({},e,{movies:Object(Y.a)(t.payload.movies),loading:t.payload.loading});case"LOAD_NEW_PAGE":return Object(J.a)({},e,{movies:Object(Y.a)(e.movies).concat(Object(Y.a)(t.payload.movies)),loading:t.payload.loading});case"SET_SEARCH_MODE":return Object(J.a)({},e,{searchMode:t.payload});case"GET_FAVORITE_MOVIES":return Object(J.a)({},e,{movies:Object(Y.a)(t.payload.movies),loading:t.payload.loading});case"INITIATE_SEARCH":return Object(J.a)({},e,{loading:t.payload});default:return e}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_OPTIONS":return{options:Object(Y.a)(t.payload)};default:return e}},Q=Object(P.c)({auth:W,movie:$,options:K}),X=Object(P.d)(Q,Object(P.a)(L.a));s.a.render(r.a.createElement(b.a,{store:X},r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[42,2,1]]]);
//# sourceMappingURL=main.68995691.chunk.js.map